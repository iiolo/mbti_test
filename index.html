<!DOCTYPE html>
<html lang="ko">
    <head>
        <meta charset="UTF-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />

        <!-- 사이트 설명 -->
        <title>곰돌이 성격 테스트</title>
        <meta
            name="description"
            content="나의 성격과 닮은 곰돌이를 MBTI를 기반으로 추천해주는 테스트입니다."
        />

        <!-- Open graph -->
        <meta property="og:type" content="website" />
        <meta property="og:title" content="곰돌이 성격 테스트" />
        <meta
            property="og:description"
            content="나의 성격과 닮은 곰돌이를 MBTI를 기반으로 추천해주는 테스트입니다."
        />
        <meta
            property="og:image"
            content="https://bear-test.netlify.app/title.png"
        />
        <meta property="og:url" content="https://bear-test.netlify.app/" />

        <!-- bootstrap -->
        <link
            rel="stylesheet"
            href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css"
            integrity="sha384-TX8t27EcRE3e/ihU7zmQxVncDAy5uIKz4rEkgIXeMed4M0jlfIDPvg6uqKI2xXr2"
            crossorigin="anonymous"
        />

        <!-- font -->
        <link rel="preconnect" href="https://fonts.googleapis.com" />
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
        <link
            href="https://fonts.googleapis.com/css2?family=Gamja+Flower&family=Jua&display=swap"
            rel="stylesheet"
        />

        <link rel="stylesheet" href="style.css" />
    </head>
    <body class="container">
        <div class="background"></div>

        <!-- 시작화면 -->
        <article class="start">
            <h1 class="mt-5 text-center" id="title_text">
                나와 닮은 곰돌이는?
            </h1>
            <img
                src="title.png"
                alt="초기화면"
                style="
                    margin: 0 auto;
                    padding: 0 10px 0;
                    width: 300px;
                    height: 300px;
                "
            />
            <button type="button" class="btn mt-5" onclick="start();">
                테스트 시작하기
            </button>
        </article>

        <!-- 문제화면 -->
        <article class="question">
            <div class="progress">
                <div
                    class="progress-bar"
                    role="progressbar"
                    style="width: calc(100 / 12 * 1%)"
                    aria-valuenow="25"
                    aria-valuemin="0"
                    aria-valuemax="100"
                ></div>
            </div>
            <div class="qBox mt-5">
                <p id="title" class="text-center mt-5">문제</p>
            </div>
            <input id="type" type="hidden" value="EI" />

            <!--아떤 type의 문제인지-->
            <button id="A" type="button" class="btn mt-5">Primary</button>
            <button id="B" type="button" class="btn mt-2">Primary</button>
        </article>

        <!-- 결과 화면 -->
        <article class="result">
            <img id="img" class="mt-5" src="result/lion.jpg" alt="animal" />
            <h2 id="animal" class="text-center mt-5">동물이름</h2>
            <h3 id="explain" class="text-center mt-5">설명</h3>

            <!-- SNS 공유 기능 -->
            <!-- Go to www.addthis.com/dashboard to customize your tools -->
            <div class="share addthis_inline_share_toolbox"></div>
        </article>

        <!-- 광고 배너 -->
        <article class="kakao_ad mt-5">
            <ins
                class="kakao_ad_area"
                style="display: none"
                data-ad-unit="DAN-7CRnWLR6NEcPiPoZ"
                data-ad-width="320"
                data-ad-height="100"
            ></ins>
            <script
                type="text/javascript"
                src="//t1.daumcdn.net/kas/static/ba.min.js"
                async
            ></script>
        </article>

        <!-- 외부 광고 연습 -->
        <!-- <a class = "mt-5 banner" href = “https://1olo.tistory.com?utm_source=bear_test&utm_medium=mbti_test&utm_campaign=iiolo”>
            <img class = "banner-img" src=”banner.png” alt=”banner”>
        </a> -->

        <!-- 점수 계산 -->
        <input type="hidden" id="EI" value="0" />
        <input type="hidden" id="SN" value="0" />
        <input type="hidden" id="TF" value="0" />
        <input type="hidden" id="JP" value="0" />

        <script
            src="https://code.jquery.com/jquery-3.5.1.slim.min.js"
            integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj"
            crossorigin="anonymous"
        ></script>
        <script
            src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.bundle.min.js"
            integrity="sha384-ho+j7jyWK8fNQe+A12Hb8AhRq26LrZ/JpcUGGOn+Y7RsweNrtN/tE3MoK7ZeZDyx"
            crossorigin="anonymous"
        ></script>

        <!-- Jquery 이용 -->
        <script>
            // 문제 객체에서 정보 가져오기
            var num = 1;

            // 문제 정보를 객체로 만들기
            var q = {
                //type 별로 3문제씩 총 12문제 생성
                1: {
                    title: '평일 내내 일한 나, 주말엔 뭐하고 쉴까?',
                    type: 'EI',
                    A: '평일 내내 회사에 있었으니까 밖에 나가야지!<br> 그동안 못봤던 친구들과 파티파티🎉!',
                    B: '주말엔 집콕이지. 혼자 집에서 영화 보면서 편하게 쉬기',
                },
                2: {
                    title: '친구가 나와의 약속에서 모르는 사람을 데려왔다.<br> 나는 어떻게 반응할까?',
                    type: 'EI',
                    A: '친구의 친구면 내친구지! 근데 너 왜 나한테 말 안하고 데려왔냐',
                    B: '불편하지만 아닌 척,, 하지만 친구와 단 둘이 있을 때보다 <br> 훨씬 말 수가 줄어든다.',
                },
                3: {
                    title: '전화와 메시지 둘 중 내가 좋아하는 연락방법은?',
                    type: 'EI',
                    A: '전화, 직접 목소리 들으면서 내 의견을 바로바로 말할 수 있어 좋아',
                    B: '메시지, 일단 생각을 정리하고 <br> 의견을 전달할 수 있는 메시지가 편해',
                },
                4: {
                    title: '멍 때릴 때 나는? ',
                    type: 'SN',
                    A: '아무 생각도 하지 않는다.',
                    B: '무한 상상, 속으로 가끔 노래도 부름',
                },
                5: {
                    title: '나의 일기 쓰는 방식은?',
                    type: 'SN',
                    A: '오늘 내가 무엇을 했는지에 대하여 쓴다.',
                    B: '오늘 내가 무엇을 느꼈는지에 대하여 쓴다.',
                },
                6: {
                    title: '수업 도중 이해가 되지 않는 내용이 있을 때, 나는?',
                    type: 'SN',
                    A: '그렇구나 하고 일단 이해가 되지 않아도 필기하고 암기한다.',
                    B: '왜지? 이해가 되지 않으면 넘어갈 수 없다.',
                },
                7: {
                    title: '친구와의 약속에 지각해버렸다. 사과를 어떻게 하지',
                    type: 'TF',
                    A: '내가 ~~이래서 늦었어, 정말 미안ㅜㅠ(지각한 이유를 설명하며 사과한다)',
                    B: '진짜 미안, 오래 기다렸지, 미안해ㅠㅠㅠ 어디 들어가 있어.. <br> 정말 미안해…(최대한 미안한 마음을 어필한다)',
                },
                8: {
                    title: '친해지고 싶은 사람이 생겼다.<br> 나의 친해지는 방법과 가까운 것은?',
                    type: 'TF',
                    A: '친해지고 싶은 사람에게 질문 공세를 퍼붓는다. <br> 헐 진짜요 왜요? 왜 그랬는데요? <br>관심분야를 얼른 알아내서 친해지고 싶어!',
                    B: '친해지고 싶은 사람의 말에 적극적인 호응과 리액션을 해준다.<br> 오 그렇구나 정말요? 진짜 좋은거 같아요. <br>말을 경청하고 있다는 것을 보여줘야지!',
                },
                9: {
                    title: '밤새 열심히 준비한 프로젝트 발표를 끝낸 나에게 <br>친구가 이렇게 말을 걸어온다. <br> “너 열심히 한 것 같진 않은데 엄청 잘했다?”<br> 이 때 나의 생각은?',
                    type: 'TF',
                    A: '열심히 하지 않아도 결과는 뛰어난 나,,,,, 이런 나에게 취한다,,, <br>나 자신 너무 멋져,,,',
                    B: '열심히 하지 않았다고.? <br>이거 하려고 밤까지 샜는데.. 너가 뭘 알아!',
                },
                10: {
                    title: '제출 기한이 정해져 있는 과제를 준비하는 나의 방식은?',
                    type: 'JP',
                    A: '과제 마감일까지의 계획표를 세워놓고 <br>그 계획에 따라 과제를 시작한다.',
                    B: '시작이 반이다. 일단 과제에 대한 자료조사부터 해보자',
                },
                11: {
                    title: '요리를 준비하는 나의 방식은?',
                    type: 'JP',
                    A: '무조건 레시피 대로, 정량, 재료 다 똑같이 준비해서 <br>순서대로 하면 망할 리 없어',
                    B: '요리는 손 맛이지, 재료가 부족해도 <br>비슷한 재료로 대체해도 맛있어!',
                },
                12: {
                    title: '친구가 갑자기 오늘 만나서 놀자고 한다. <br>이때 나의 반응은?',
                    type: 'JP',
                    A: '별다른 스케줄이 없다면 좋아. 하지만 할 일이 있다면 <br>친구에게 미안하지만 만나지 못할 거 같다고 말하기',
                    B: '완전 예쓰!!! 바로 나가서 논다. 오늘의 일은 내일의 내가 하겠지!',
                },
            };

            // mbti 결과를 객체로 저장
            var result = {
                ISFP: {
                    animal: '잠꾸러기 곰돌이',
                    explain: '잠꾸러기 곰돌이 설명',
                    img: 'result/ISFP.png',
                },
                ISFJ: {
                    animal: '다정한 곰돌이',
                    explain: '다정한 곰돌이 설명',
                    img: 'result/ISFJ.png',
                },
                ISTP: {
                    animal: '냉철한 곰돌이',
                    explain: '냉철한 곰돌이 설명',
                    img: 'result/ISTP.png',
                },
                ISTJ: {
                    animal: '침착한 곰돌이',
                    explain: '침착한 곰돌이 설명',
                    img: 'result/ISTJ.png',
                },
                INFP: {
                    animal: '용감한 곰돌이',
                    explain: '용감한 곰돌이 설명',
                    img: 'result/INFP.png',
                },
                INFJ: {
                    animal: '사려깊은 곰돌이',
                    explain: '사려깊은 곰돌이 설명',
                    img: 'result/INFJ.png',
                },
                INTP: {
                    animal: '느긋한 곰돌이',
                    explain: '느긋한 곰돌이 설명',
                    img: 'result/INTP.png',
                },
                INTJ: {
                    animal: '지적인 곰돌이',
                    explain: '지적인 곰돌이 설명',
                    img: 'result/INTJ.png',
                },

                ESFP: {
                    animal: '잘 노는 곰돌이',
                    explain: '잘 노는 곰돌이 설명',
                    img: 'result/ESFP.png',
                },
                ESFJ: {
                    animal: '인싸 곰돌이',
                    explain: '인싸 곰돌이 설명',
                    img: 'result/ESFJ.png',
                },
                ESTP: {
                    animal: '장난스러운 곰돌이',
                    explain: '장난스러운 곰돌이 설명',
                    img: 'result/ESTP.png',
                },
                ESTJ: {
                    animal: '단호한 곰돌이',
                    explain: '단호한 곰돌이 설명',
                    img: 'result/ESTJ.png',
                },

                ENFP: {
                    animal: '발랄한 곰돌이',
                    explain: '발랄한 곰돌이 설명',
                    img: 'result/ENFP.png',
                },
                ENFJ: {
                    animal: '친절한 곰돌이',
                    explain: '친절한한 곰돌이 설명',
                    img: 'result/ENFJ.png',
                },
                ENTP: {
                    animal: '발랄한 곰돌이',
                    explain: '발랄한 곰돌이 설명',
                    img: 'result/ENTP.png',
                },
                ENTJ: {
                    animal: '카리스마 곰돌이',
                    explain: '호랑이 설명',
                    img: 'result/ENTJ.png',
                },
            };

            function start() {
                $('.start').hide();
                $('.question').show();
                next(); //처음 시작 버튼 눌렀을 때 시작화면 숨기고 문제화면을 보여주면서 바로 첫번째 문제가 나올 수 있도록 해주기
            }

            // A버튼을 눌렀을 때만 value 값 +1
            $('#A').click(function () {
                var type = $('#type').val();
                var preValue = $('#' + type).val();
                $('#' + type).val(parseInt(preValue) + 1);
                next();
            });

            // B버튼 클릭시 value 값 증가하지 않아도 되므로 next 함수만 적용(즉 점수 저장 안하고 다음 문제로 넘어감)
            $('#B').click(function () {
                next();
            });

            // 다음 문제로 넘어가는 함수 만들기(문제랑 버튼들이 다음 문제에 해당하는 것으로 변경됨)
            function next() {
                if (num == 13 /*마지막 문제에서 다음버튼 클릭시 */) {
                    $('.question').hide();
                    $('.result').show();

                    //mbti를 판단하는 최종 로직
                    var mbti = '';
                    $('#EI').val() < 2 ? (mbti += 'I') : (mbti += 'E'); // EI
                    $('#SN').val() < 2 ? (mbti += 'N') : (mbti += 'S'); // SN
                    $('#TF').val() < 2 ? (mbti += 'F') : (mbti += 'T'); // TF
                    $('#JP').val() < 2 ? (mbti += 'P') : (mbti += 'J'); // JP

                    // alert(mbti); //test용

                    // 이미지 주소
                    $('#img').attr('src', result[mbti]['img']); //result의 mbti라는 key의 value 안 객체 속 img라는 key의 value

                    // 동물 이름
                    $('#animal').html(result[mbti]['animal']);

                    // 설명
                    $('#explain').html(result[mbti]['explain']);
                } else {
                    $('.progress-bar').attr(
                        'style',
                        'width: calc(100 / 12 * ' + num + '%)'
                    );

                    $('#title').html(q[num]['title']);
                    $('#type').val(q[num]['type']);
                    $('#A').html(q[num]['A']);
                    $('#B').html(q[num]['B']);
                    num++;
                }
            }
        </script>

        <!-- AddThis SNS 공유기능 -->
        <!-- Go to www.addthis.com/dashboard to customize your tools -->
        <script
            type="text/javascript"
            src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-62027571b10ddddd"
        ></script>
    </body>
</html>
