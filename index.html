<!DOCTYPE html>
<html lang="ko">
    <head>
        <meta charset="UTF-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />

        <title>곰돌이 성격 테스트</title>
        <meta
            name="description"
            content="나의 성격과 닮은 곰돌이를 MBTI를 기반으로 추천해주는 테스트입니다."
        />

        <!-- bootstrap -->
        <link
            rel="stylesheet"
            href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css"
            integrity="sha384-TX8t27EcRE3e/ihU7zmQxVncDAy5uIKz4rEkgIXeMed4M0jlfIDPvg6uqKI2xXr2"
            crossorigin="anonymous"
        />

        <!-- font -->
        <link rel="preconnect" href="https://fonts.googleapis.com" />
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
        <link
            href="https://fonts.googleapis.com/css2?family=Gamja+Flower&display=swap"
            rel="stylesheet"
        />

        <link rel="stylesheet" href="style.css" />
    </head>
    <body class="container">
        <div class="background"></div>

        <!-- 시작화면 -->
        <article class="start">
            <h1 class="mt-5 text-center">나와 닮은 곰돌이는?</h1>
            <button
                type="button"
                class="btn btn-primary mt-5"
                onclick="start();"
            >
                테스트 시작하기
            </button>
        </article>

        <!-- 문제화면 -->
        <article class="question">
            <div class="progress">
                <div
                    class="progress-bar"
                    role="progressbar"
                    style="width: calc(100 / 12 * 1%)"
                    aria-valuenow="25"
                    aria-valuemin="0"
                    aria-valuemax="100"
                ></div>
            </div>
            <h2 id="title" class="text-center mt-5">문제</h2>
            <input id="type" type="hidden" value="EI" />

            <!--아떤 type의 문제인지-->
            <button id="A" type="button" class="btn btn-primary mt-5">
                Primary
            </button>
            <button id="B" type="button" class="btn btn-primary mt-5">
                Primary
            </button>
        </article>

        <!-- 결과 화면 -->
        <article class="result">
            <img id="img" class="mt-5" src="result/lion.jpg" alt="animal" />
            <h2 id="animal" class="text-center mt-5">동물이름</h2>
            <h3 id="explain" class="text-center mt-5">설명</h3>

            <!-- SNS 공유 기능 -->
            <!-- Go to www.addthis.com/dashboard to customize your tools -->
            <div class="share addthis_inline_share_toolbox"></div>
        </article>

        <!-- 광고 배너 -->
        <article class="kakao_ad mt-5">
            <ins
                class="kakao_ad_area"
                style="display: none"
                data-ad-unit="DAN-7CRnWLR6NEcPiPoZ"
                data-ad-width="320"
                data-ad-height="100"
            ></ins>
            <script
                type="text/javascript"
                src="//t1.daumcdn.net/kas/static/ba.min.js"
                async
            ></script>
        </article>

        <!-- 외부 광고 연습 -->
        <!-- <a class = "mt-5 banner" href = “https://1olo.tistory.com?utm_source=bear_test&utm_medium=mbti_test&utm_campaign=iiolo”>
            <img class = "banner-img" src=”banner.png” alt=”banner”>
        </a> -->

        <!-- 점수 계산 -->
        <input type="hidden" id="EI" value="0" />
        <input type="hidden" id="SN" value="0" />
        <input type="hidden" id="TF" value="0" />
        <input type="hidden" id="JP" value="0" />

        <script
            src="https://code.jquery.com/jquery-3.5.1.slim.min.js"
            integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj"
            crossorigin="anonymous"
        ></script>
        <script
            src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.bundle.min.js"
            integrity="sha384-ho+j7jyWK8fNQe+A12Hb8AhRq26LrZ/JpcUGGOn+Y7RsweNrtN/tE3MoK7ZeZDyx"
            crossorigin="anonymous"
        ></script>

        <!-- Jquery 이용 -->
        <script>
            // 문제 객체에서 정보 가져오기
            var num = 1;

            // 문제 정보를 객체로 만들기
            var q = {
                //type 별로 3문제씩 총 12문제 생성
                1: { title: '문제 1번', type: 'EI', A: 'E', B: 'I' },
                2: { title: '문제 2번', type: 'EI', A: 'E', B: 'I' },
                3: { title: '문제 3번', type: 'EI', A: 'E', B: 'I' },
                4: { title: '문제 4번', type: 'SN', A: 'S', B: 'N' },
                5: { title: '문제 5번', type: 'SN', A: 'S', B: 'N' },
                6: { title: '문제 6번', type: 'SN', A: 'S', B: 'N' },
                7: { title: '문제 7번', type: 'TF', A: 'T', B: 'F' },
                8: { title: '문제 8번', type: 'TF', A: 'T', B: 'F' },
                9: { title: '문제 9번', type: 'TF', A: 'T', B: 'F' },
                10: { title: '문제 10번', type: 'JP', A: 'J', B: 'P' },
                11: { title: '문제 11번', type: 'JP', A: 'J', B: 'P' },
                12: { title: '문제 12번', type: 'JP', A: 'J', B: 'P' },
            };

            // mbti 결과를 객체로 저장
            var result = {
                ISFP: {
                    animal: '잠꾸러기 곰돌이',
                    explain: '잠꾸러기 곰돌이 설명',
                    img: 'result/ISFP.png',
                },
                ISFJ: {
                    animal: '다정한 곰돌이',
                    explain: '다정한 곰돌이 설명',
                    img: 'result/ISFJ.png',
                },
                ISTP: {
                    animal: '냉철한 곰돌이',
                    explain: '냉철한 곰돌이 설명',
                    img: 'result/ISTP.png',
                },
                ISTJ: {
                    animal: '침착한 곰돌이',
                    explain: '침착한 곰돌이 설명',
                    img: 'result/ISTJ.png',
                },
                INFP: {
                    animal: '용감한 곰돌이',
                    explain: '용감한 곰돌이 설명',
                    img: 'result/INFP.png',
                },
                INFJ: {
                    animal: '사려깊은 곰돌이',
                    explain: '사려깊은 곰돌이 설명',
                    img: 'result/INFJ.png',
                },
                INTP: {
                    animal: '느긋한 곰돌이',
                    explain: '느긋한 곰돌이 설명',
                    img: 'result/INTP.png',
                },
                INTJ: {
                    animal: '지적인 곰돌이',
                    explain: '지적인 곰돌이 설명',
                    img: 'result/INTJ.png',
                },

                ESFP: {
                    animal: '잘 노는 곰돌이',
                    explain: '잘 노는 곰돌이 설명',
                    img: 'result/ESFP.png',
                },
                ESFJ: {
                    animal: '인싸 곰돌이',
                    explain: '인싸 곰돌이 설명',
                    img: 'result/ESFJ.png',
                },
                ESTP: {
                    animal: '장난스러운 곰돌이',
                    explain: '장난스러운 곰돌이 설명',
                    img: 'result/ESTP.png',
                },
                ESTJ: {
                    animal: '단호한 곰돌이',
                    explain: '단호한 곰돌이 설명',
                    img: 'result/ESTJ.png',
                },

                ENFP: {
                    animal: '발랄한 곰돌이',
                    explain: '발랄한 곰돌이 설명',
                    img: 'result/ENFP.png',
                },
                ENFJ: {
                    animal: '친절한 곰돌이',
                    explain: '친절한한 곰돌이 설명',
                    img: 'result/ENFJ.png',
                },
                ENTP: {
                    animal: '발랄한 곰돌이',
                    explain: '발랄한 곰돌이 설명',
                    img: 'result/ENTP.png',
                },
                ENTJ: {
                    animal: '카리스마 곰돌이',
                    explain: '호랑이 설명',
                    img: 'result/ENTJ.png',
                },
            };

            function start() {
                $('.start').hide();
                $('.question').show();
                next(); //처음 시작 버튼 눌렀을 때 시작화면 숨기고 문제화면을 보여주면서 바로 첫번째 문제가 나올 수 있도록 해주기
            }

            // A버튼을 눌렀을 때만 value 값 +1
            $('#A').click(function () {
                var type = $('#type').val();
                var preValue = $('#' + type).val();
                $('#' + type).val(parseInt(preValue) + 1);
                next();
            });

            // B버튼 클릭시 value 값 증가하지 않아도 되므로 next 함수만 적용(즉 점수 저장 안하고 다음 문제로 넘어감)
            $('#B').click(function () {
                next();
            });

            // 다음 문제로 넘어가는 함수 만들기(문제랑 버튼들이 다음 문제에 해당하는 것으로 변경됨)
            function next() {
                if (num == 13 /*마지막 문제에서 다음버튼 클릭시 */) {
                    $('.question').hide();
                    $('.result').show();

                    //mbti를 판단하는 최종 로직
                    var mbti = '';
                    $('#EI').val() < 2 ? (mbti += 'I') : (mbti += 'E'); // EI
                    $('#SN').val() < 2 ? (mbti += 'N') : (mbti += 'S'); // SN
                    $('#TF').val() < 2 ? (mbti += 'F') : (mbti += 'T'); // TF
                    $('#JP').val() < 2 ? (mbti += 'P') : (mbti += 'J'); // JP

                    // alert(mbti); //test용

                    // 이미지 주소
                    $('#img').attr('src', result[mbti]['img']); //result의 mbti라는 key의 value 안 객체 속 img라는 key의 value

                    // 동물 이름
                    $('#animal').html(result[mbti]['animal']);

                    // 설명
                    $('#explain').html(result[mbti]['explain']);
                } else {
                    $('.progress-bar').attr(
                        'style',
                        'width: calc(100 / 12 * ' + num + '%)'
                    );

                    $('#title').html(q[num]['title']);
                    $('#type').val(q[num]['type']);
                    $('#A').html(q[num]['A']);
                    $('#B').html(q[num]['B']);
                    num++;
                }
            }
        </script>

        <!-- AddThis SNS 공유기능 -->
        <!-- Go to www.addthis.com/dashboard to customize your tools -->
        <script
            type="text/javascript"
            src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-62027571b10ddddd"
        ></script>
    </body>
</html>
